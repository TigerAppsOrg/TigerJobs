<div id="show-filter" class="center-container filter-show-btn" onclick="showFilters(true)">
    <b>Show Filters</b>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" fill="currentColor" class="bi bi-eye"
        viewBox="0 0 16 16">
        <path
            d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z" />
        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z" />
    </svg>
    <br>
</div>
<div id="hide-filter" class="center-container filter-show-btn" onclick="showFilters(false)">
    <b>Hide Filters</b>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" fill="currentColor" class="bi bi-eye-slash"
        viewBox="0 0 16 16">
        <path
            d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z" />
        <path
            d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z" />
        <path
            d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z" />
    </svg>
    <br>
</div>
<div id="job-filters-section" class="col-md-3 filters-card container-scroll-jobs filters-lg">
    <div class="left-container">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000"
            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="4" y1="21" x2="4" y2="14"></line>
            <line x1="4" y1="10" x2="4" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="3"></line>
            <line x1="20" y1="21" x2="20" y2="16"></line>
            <line x1="20" y1="12" x2="20" y2="3"></line>
            <line x1="1" y1="14" x2="7" y2="14"></line>
            <line x1="9" y1="8" x2="15" y2="8"></line>
            <line x1="17" y1="16" x2="23" y2="16"></line>
        </svg>
        <span class="font-16px">
            <b>Advanced Search Filters:</b>
        </span>
    </div>
    <div class="row">
        <div class="col-md-6 left-container">
            <b>Difficulty</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-1" onchange="getFilteredData()">
                <label class="form-check-label" for="difficulty-1">
                    1
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-2" onchange="getFilteredData()">
                <label class="form-check-label" for="difficulty-2">
                    2
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-3" onchange="getFilteredData()">
                <label class="form-check-label" for="difficulty-3">
                    3
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-4" onchange="getFilteredData()">
                <label class="form-check-label" for="difficulty-4">
                    4
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-5" onchange="getFilteredData()">
                <label class="form-check-label" for="difficulty-5">
                    5
                </label>
            </div>
        </div>
        <div class="col-md-6 left-container">
            <b>Enjoyment</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-1" onchange="getFilteredData()">
                <label class="form-check-label" for="enjoyment-1">
                    1
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-2" onchange="getFilteredData()">
                <label class="form-check-label" for="enjoyment-2">
                    2
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-3" onchange="getFilteredData()">
                <label class="form-check-label" for="enjoyment-3">
                    3
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-4" onchange="getFilteredData()">
                <label class="form-check-label" for="enjoyment-4">
                    4
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-5" onchange="getFilteredData()">
                <label class="form-check-label" for="enjoyment-5">
                    5
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-6 left-container">
            <b>Class Year</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-1" onchange="getFilteredData()">
                <label class="form-check-label" for="class-1">
                    Freshman
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-2" onchange="getFilteredData()">
                <label class="form-check-label" for="class-2">
                    Sophomore
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-3" onchange="getFilteredData()">
                <label class="form-check-label" for="class-3">
                    Junior
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-4" onchange="getFilteredData()">
                <label class="form-check-label" for="class-4">
                    Senior
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-5" onchange="getFilteredData()">
                <label class="form-check-label" for="class-5">
                    Graduate
                </label>
            </div>
        </div>
        <div class="col-6 left-container">
            <b>Location Style</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-1" onchange="getFilteredData()">
                <label class="form-check-label" for="location-1">
                    In-person
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-2" onchange="getFilteredData()">
                <label class="form-check-label" for="location-2">
                    Hybrid
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-3" onchange="getFilteredData()">
                <label class="form-check-label" for="location-3">
                    Virtual
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Job Type</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-1" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-1">
                    Internship: Industry - Private Sector
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-2" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-2">
                    Internship: Industry - Public Sector
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-3" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-3">
                    Research - Princeton sponsored
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-4" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-4">
                    Research - Non-Princeton sponsored
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-5" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-5">
                    Co-op
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-6" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-6">
                    Part-time
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-7" onchange="getFilteredData()">
                <label class="form-check-label" for="jobtype-7">
                    Full-time/New grad
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container autocomplete">
            <b>Locations</b>
            <div class="filters-input-div">
                <input id="filter-location" class="filters-input" type="text" placeholder="Enter a location...">
            </div>
        </div>
        <div id="chosen-locations" class="col-12 left-container">
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Majors</b>
            <div>
                <select id="dropdown-majors" multiple name="native-select" placeholder="Select majors"
                    data-search="false" data-silent-initial-value-set="true">
                    {% for major in major_names %}
                    <option value={{major_codes[loop.index - 1]}}>
                        {{major}}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Certificates</b>
            <div>
                <select id="dropdown-certificates" multiple name="native-select" placeholder="Select certificates"
                    data-search="false" data-silent-initial-value-set="true">
                    {% for certificate in certificates %}
                    <option value={{certificate}}>
                        {{certificate}}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Job Fields</b>
            <div>
                <select id="dropdown-fields" multiple name="native-select" placeholder="Select job fields"
                    data-search="false" data-silent-initial-value-set="true" onchange="getFilteredData()">
                    <option value="Pharmaceuticals">Pharmaceuticals</option>
                    <option value="Biotech">Biotech</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Legal Services">Legal Services</option>
                    <option value="Econonomics and Business Administration">Economics and Business Administration
                    </option>
                    <option value="Government, Education, and Policy">Government, Education, and Policy</option>
                    <option value="Investment and Corporate Banking">Investment and Corporate Banking</option>
                    <option value="Management Consulting">Management Consulting</option>
                    <option value="Trading, Private Equity, and Venture Capital">Trading, Private Equity, and Venture
                        Capital</option>
                    <option value="Accounting and Insurance">Accounting and Insurance</option>
                    <option value="Fintech">Fintech</option>
                    <option value="IT and Security">IT and Security</option>
                    <option value="Software Engineering">Software Engineering</option>
                    <option value="Aerospace and Robotics">Aerospace and Robotics</option>
                    <option value="Data Science and Analytics">Data Science and Analytics</option>
                    <option value="Engineering and Project Management">Engineering and Project Management</option>
                    <option value="Marketing and Business Development">Marketing and Business Development</option>
                    <option value="Journalism, Publishing, and Media">Journalism, Publishing, and Media</option>
                    <option value="Graphic Design and Production">Graphic Design and Production</option>
                    <option value="Arts and Entertainment">Arts and Entertainment</option>
                    <option value="National or College Laboratory">National or College Laboratory</option>
                    <option value="STEM Research">STEM Research</option>
                    <option value="Humanities Research">Humanities Research</option>
                </select>
            </div>
        </div>
    </div>
    <br>
</div>
<script>
    // Global variable for locations but in JSON
    var locations_json = {{ locations | tojson }};
    function deleteLocation(el) {
        el.remove();
        getFilteredData();
    }
    function autocomplete(inp, arr) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {
                        /*insert the value for the autocomplete text field:*/
                        inp.value = "";
                        var newLocation = $('<button type="button" onclick="deleteLocation(this)" class="location-btn">'
                            + this.getElementsByTagName("input")[0].value
                            + '&nbsp;<span class="close" aria-label="Close"><span aria-hidden="true">&times;</span></span>'
                            + '</button>');
                        $('#chosen-locations').append(newLocation);
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                        getFilteredData();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }
    // Autocomplete for location filter
    function setup() {
        VirtualSelect.init({
            ele: '#dropdown-fields',
            multiple: 'true',
            search: true,
            searchGroup: false, // Include group title for searching
            searchByStartsWith: false, // Search options by startsWith() method,
            optionsCount: 5,
            hasOptionDescription: false,
            disableSelectAll: false,
            additionalClasses: 'filters-major',
        });
        $('#dropdown-fields').change(function () {
            getFilteredData();
        });
        VirtualSelect.init({
            ele: '#dropdown-majors',
            multiple: 'true',
            search: true,
            searchGroup: false, // Include group title for searching
            searchByStartsWith: false, // Search options by startsWith() method,
            optionsCount: 5,
            hasOptionDescription: false,
            disableSelectAll: false,
            additionalClasses: 'filters-major',
        });
        $('#dropdown-majors').change(function () {
            getFilteredData();
        });
        VirtualSelect.init({
            ele: '#dropdown-certificates',
            multiple: 'true',
            search: true,
            searchGroup: false, // Include group title for searching
            searchByStartsWith: false, // Search options by startsWith() method,
            optionsCount: 5,
            hasOptionDescription: false,
            disableSelectAll: false,
            additionalClasses: 'filters-major',
        });
        $('#dropdown-certificates').change(function () {
            getFilteredData();
        });
        // Autocomplete for locations
        autocomplete(document.getElementById("filter-location"), locations_json);
    }
    $('document').ready(setup);
</script>