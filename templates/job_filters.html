<div class="col-3 filters-card container-scroll-jobs">
    <div class="left-container">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000"
            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="4" y1="21" x2="4" y2="14"></line>
            <line x1="4" y1="10" x2="4" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="3"></line>
            <line x1="20" y1="21" x2="20" y2="16"></line>
            <line x1="20" y1="12" x2="20" y2="3"></line>
            <line x1="1" y1="14" x2="7" y2="14"></line>
            <line x1="9" y1="8" x2="15" y2="8"></line>
            <line x1="17" y1="16" x2="23" y2="16"></line>
        </svg>
        <span class="font-16px">
            <b>Advanced Search Filters:</b>
        </span>
    </div>
    <div class="row">
        <div class="col-6 left-container">
            <b>Difficulty</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-1">
                <label class="form-check-label" for="difficulty-1">
                    1
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-2">
                <label class="form-check-label" for="difficulty-2">
                    2
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-3">
                <label class="form-check-label" for="difficulty-3">
                    3
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-4">
                <label class="form-check-label" for="difficulty-4">
                    4
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="difficulty-5">
                <label class="form-check-label" for="difficulty-5">
                    5
                </label>
            </div>
        </div>
        <div class="col-6 left-container">
            <b>Enjoyment</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-1">
                <label class="form-check-label" for="enjoyment-1">
                    1
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-2">
                <label class="form-check-label" for="enjoyment-2">
                    2
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-3">
                <label class="form-check-label" for="enjoyment-3">
                    3
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-4">
                <label class="form-check-label" for="enjoyment-4">
                    4
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="enjoyment-5">
                <label class="form-check-label" for="enjoyment-5">
                    5
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-6 left-container">
            <b>Class Year</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-1">
                <label class="form-check-label" for="class-1">
                    Freshman
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-2">
                <label class="form-check-label" for="class-2">
                    Sophomore
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-3">
                <label class="form-check-label" for="class-3">
                    Junior
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-4">
                <label class="form-check-label" for="class-4">
                    Senior
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="class-5">
                <label class="form-check-label" for="class-5">
                    Graduate
                </label>
            </div>
        </div>
        <div class="col-6 left-container">
            <b>Location Style</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-1">
                <label class="form-check-label" for="location-1">
                    In-person
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-2">
                <label class="form-check-label" for="location-2">
                    Hybrid
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="location-3">
                <label class="form-check-label" for="location-3">
                    Virtual
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Job Type</b>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-1">
                <label class="form-check-label" for="jobtype-1">
                    Internship: Industry - Private Sector
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-2">
                <label class="form-check-label" for="jobtype-2">
                    Internship: Industry - Public Sector
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-3">
                <label class="form-check-label" for="jobtype-3">
                    Research - Princeton sponsored
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-4">
                <label class="form-check-label" for="jobtype-4">
                    Research - Non-Princeton sponsored
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-5">
                <label class="form-check-label" for="jobtype-5">
                    Co-op
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-6">
                <label class="form-check-label" for="jobtype-6">
                    Part-time
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="jobtype-7">
                <label class="form-check-label" for="jobtype-7">
                    Full-time/New grad
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Locations</b>
            <div class="filters-input-div">
                <input id="filter-location" class="filters-input" type="text" placeholder="Enter a location...">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Majors</b>
            <div>
                <select id="dropdown-majors" multiple name="native-select" placeholder="Select majors" data-search="false"
                    data-silent-initial-value-set="true">
                    {% for major in major_names %}
                    <option value={{major_codes[loop.index - 1]}}>
                        {{major}}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Certificates</b>
            <div class="filters-input-div">
                <input id="filter-certificates" class="filters-input" type="text" placeholder="Enter a certificate...">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 left-container">
            <b>Job Fields</b>
            <div>
                <select id="dropdown-fields" multiple name="native-select" placeholder="Select job fields" data-search="false"
                    data-silent-initial-value-set="true">
                    <option value="Pharmaceuticals">Pharmaceuticals</option>
                    <option value="Biotech">Biotech</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Legal Services">Legal Services</option>
                    <option value="Econonomics and Business Administration">Economics and Business Administration</option>
                    <option value="Government, Education, and Policy">Government, Education, and Policy</option>
                    <option value="Investment and Corporate Banking">Investment and Corporate Banking</option>
                    <option value="Management Consulting">Management Consulting</option>
                    <option value="Trading, Private Equity, and Venture Capital">Trading, Private Equity, and Venture Capital</option>
                    <option value="Accounting and Insurance">Accounting and Insurance</option>
                    <option value="Fintech">Fintech</option>
                    <option value="IT and Security">IT and Security</option>
                    <option value="Software Engineering">Software Engineering</option>
                    <option value="Aerospace and Robotics">Aerospace and Robotics</option>
                    <option value="Data Science and Analytics">Data Science and Analytics</option>
                    <option value="Engineering and Project Management">Engineering and Project Management</option>
                    <option value="Marketing and Business Development">Marketing and Business Development</option>
                    <option value="Journalism, Publishing, and Media">Journalism, Publishing, and Media</option>
                    <option value="Graphic Design and Production">Graphic Design and Production</option>
                    <option value="Arts and Entertainment">Arts and Entertainment</option>
                    <option value="National or College Laboratory">National or College Laboratory</option>
                    <option value="STEM Research">STEM Research</option>
                    <option value="Humanities Research">Humanities Research</option>
                </select>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-12 center-container">
            <button class="profile-btn-submit" onclick="getFilteredData()">Update Filters</button>
        </div>
    </div>
</div>
<script> 
    function getFilteredData() {
        // Get query
        var query = $('#job-search-bar').val()
        // Get all difficulty scores
        var difficulty = []
        for (let i = 1; i <= 5; i++) {
            var difficultyId = "#difficulty-" + i;
            if ($(difficultyId).is(':checked')) difficulty.push(i);
        }
        // if (difficulty.length == 0) difficulty = [1, 2, 3, 4, 5];
        // Get all enjoyment scores
        var enjoyment = []
        for (let i = 1; i <= 5; i++) {
            var enjoymentId = "#enjoyment-" + i;
            if ($(enjoymentId).is(':checked')) enjoyment.push(i);
        }
        // Get all class years
        var class_options = ['fr', 'so', 'jr', 'sr', 'grad']
        var classes = []
        for (let i = 1; i <= 5; i++) {
            var classId = "#class-" + i;
            if ($(classId).is(':checked')) classes.push(class_options[i - 1]);
        }
        // Get all location styles
        var locationstyle_options = ['In-person', 'Hybrid', 'Virtual']
        var locationstyles = []
        for (let i = 1; i <= 3; i++) {
            var locationId = "#location-" + i;
            if ($(locationId).is(':checked')) locationstyles.push(locationstyle_options[i - 1]);
        }
        // Get all job types
        var jobtype_options = ['Internship: Industry - Private Sector', 
            'Internship: Industry - Public Sector', 'Research - Princeton sponsored',
            'Research - Non-Princeton sponsored', 'Co-op', 'Part-time', 'Full-time/New grad']
        var jobtypes = []
        for (let i = 1; i <= 7; i++) {
            var jobtypeId = "#jobtype-" + i;
            if ($(jobtypeId).is(':checked')) jobtypes.push(jobtype_options[i - 1]);
        }
        // Locations (TO DO)
        // Majors
        var majors = $('#dropdown-majors').val();
        // Certificates (TO DO)
        // Job Fields
        var fields = $('#dropdown-fields').val();
        // Send JSON event
        var json_event = {
            "query": query,
            "difficulty": difficulty,
            "enjoyment": enjoyment,
            "classes": classes,
            "locationstyle": locationstyles,
            "jobtype": jobtypes,
            "majors": majors,
            "fields": fields
        };
        if(request != null)
            request.abort();
        request = $.post("/jobs/filter", {
            dataType: 'json',
            contentType: 'application/json',
            event_data: JSON.stringify(json_event)
        }).done(function (data) {
            $('#job-search-results').html(data);
        }).fail(function (jqXHR, textStatus, errorThrown) {
            alert("Error!")
        });
    }

    function setup() {

        VirtualSelect.init({
            ele: '#dropdown-fields',
            multiple: 'true',
            search: true,
            searchGroup: false, // Include group title for searching
            searchByStartsWith: false, // Search options by startsWith() method,
            optionsCount: 5,
            hasOptionDescription: false,
            disableSelectAll: false,
            additionalClasses: 'filters-major',
        });
        VirtualSelect.init({
            ele: '#dropdown-majors',
            multiple: 'true',
            search: true,
            searchGroup: false, // Include group title for searching
            searchByStartsWith: false, // Search options by startsWith() method,
            optionsCount: 5,
            hasOptionDescription: false,
            disableSelectAll: false,
            additionalClasses: 'filters-major',
        });
    }
    $('document').ready(setup);
</script>